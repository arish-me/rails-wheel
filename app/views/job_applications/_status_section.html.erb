<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5">
  <h3 class="text-lg font-semibold text-gray-900 mb-4">Application Status</h3>

  <div class="space-y-4">
    <!-- Current Status -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">Current Status</label>
      <%= render 'status_badge', status: @application.status %>
    </div>

    <!-- Status Update Form (for company users) -->
    <% if current_user.company == @job.company %>
      <%= form_with url: update_status_job_job_application_path(@job, @application), method: :patch, class: "space-y-4" do |f| %>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Update Status</label>
          <%= f.select :status,
              JobApplication::STATUSES.map { |status| [status.titleize, status] },
              { selected: @application.status },
              { class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" } %>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Status Notes (Optional)</label>
          <%= f.text_area :status_notes,
              value: @application.status_notes,
              rows: 3,
              class: "block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",
              placeholder: "Add any notes about this status change..." %>
        </div>

        <%= f.submit "Update Status",
            class: "w-full inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
      <% end %>
    <% end %>
  </div>
</div>
